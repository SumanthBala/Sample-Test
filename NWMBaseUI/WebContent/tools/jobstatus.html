<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JOB STATUS</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   
 
   
   
<style type="text/css">
    .bs-example{
    	margin: 20p;
    	
    
    }
    
    
    .filterable {
    margin-top: 15px;
}
.filterable .panel-heading .pull-right {
    margin-top: -20px;
}
.filterable .filters input[disabled] {
    background-color: transparent;
    border: none;
    cursor: auto;
    box-shadow: none;
    padding: 0;
    height: auto;
}
.filterable .filters input[disabled]::-webkit-input-placeholder {
    color: #124191;
}
.filterable .filters input[disabled]::-moz-placeholder {
    color: #124191;
}
.filterable .filters input[disabled]:-ms-input-placeholder {
    color: #124191;
}

.row {
    margin-right: -295px;
    margin-left: -20px;
    color :black;
    text-overflow: ellipsis;
   
}


.panel-primary>.panel-heading {
    background-image: -webkit-linear-gradient(top,#124191 0,#2e6da4 100%);
    background-image: -o-linear-gradient(top,#124191 0,#2e6da4 100%);
    background-image: -webkit-gradient(linear,left top,left bottom,from(#124191),to(#124191));
    background-image: linear-gradient(to bottom,#124191 0,#124191 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#124191', endColorstr='#124191', GradientType=0);
    background-repeat: repeat-x;


</style>
<script type = "text/javascript">  
								// JavaScript Function for the filter of the jos status ///
								
								
var selectLinkText = "";
var link =""; 
								
$(document).ready(function(){
    $('.filterable .btn-filter').click(function(){
        var $panel = $(this).parents('.filterable'),
        $filters = $panel.find('.filters input'),
        $tbody = $panel.find('.table tbody');
        if ($filters.prop('disabled') == true) {
            $filters.prop('disabled', false);
            $filters.first().focus();
        } else {
            $filters.val('').prop('disabled', true);
            $tbody.find('.no-result').remove();
            $tbody.find('tr').show();
        }
    });

    $('.filterable .filters input').keyup(function(e){
        /* Ignore tab key */
        var code = e.keyCode || e.which;
        if (code == '9') return;
        /* Useful DOM data and selectors */
        var $input = $(this),
        inputContent = $input.val().toLowerCase(),
        $panel = $input.parents('.filterable'),
        column = $panel.find('.filters th').index($input.parents('th')),
        $table = $panel.find('.table'),
        $rows = $table.find('tbody tr');
        /* Dirtiest filter function ever ;) */
        var $filteredRows = $rows.filter(function(){
            var value = $(this).find('td').eq(column).text().toLowerCase();
            return value.indexOf(inputContent) === -1;
        });
        /* Clean previous no-result if exist */
        $table.find('tbody .no-result').remove();
        /* Show all rows, hide filtered ones (never do that outside of a demo ! xD) */
        $rows.show();
        $filteredRows.hide();
        /* Prepend no-result row if all rows are filtered */
        if ($filteredRows.length === $rows.length) {
            $table.find('tbody').prepend($('<tr class="no-result text-center"><td colspan="'+ $table.find('.filters th').length +'">No Jobs Found</td></tr>'));
        }
    });
});


/// Showing job status 


$(document).ready(function() {
        	
        	
               // $.get("http://localhost:8080/NWMJobService/job/jobs", function(data) {
            	   $.ajax({
			      type: "GET",
			      contentType: "application/json; charset=utf-8",
			      url: "/NWMJobService/job/jobs",
			      dataType: "json",
			      success: function(data){
                $.each(data, function(i, job) {
					if(job.status == "INPROGRESS"){
						
						$(".data-jobs-js").append(
		                        "<tr><td><a href= javascript:openwindow()>"+ job.transactionId +"</a></td>" +
		                        "<td>" + job.circleName + "</td>" +
		                        "<td>" + job.clientName + "</td>" +
		                        "<td>" + job.deviceType + "</td>" +
		                        "<td>" + job.deviceStr + "</td>" +
		                        "<td>" + job.commandStr + "</td>" +
		                        "<td>" + job.status + "</td>" + 
		                        "<td> <a href=javascript:AlertIt();>Report </a></td></tr>");
							
					} else {
                	
                    $(".data-jobs-js").append(
                        "<tr><td><a href= javascript:openwindow()>"+ job.transactionId +"</a></td>" +
                        "<td>" + job.circleName + "</td>" +
                        "<td>" + job.clientName + "</td>" +
                        "<td>" + job.deviceType + "</td>" +
                        "<td>" + job.deviceStr + "</td>" +
                        "<td>" + job.commandStr + "</td>" +
                        "<td>" + job.status + "</td>" + 
                        "<td> <a href ='"+job.reportLink+"'>Report</a> </td></tr>");
					}
                });
			      }
			     
            	   });
            	   
        });

               ////
              
             $(document).ready(function(){

    $("#jobs").on('click', 'tr', function() {
  // get the current row
  
  console.log($(this).children(":first").text());
  selectLinkText = $(this).children(":first").text()
  $(this).find('td:eq(6)').text()
  
localStorage.linkval = selectLinkText;
 // alert(selectLinkText);
  
  
});
});  
                  
//

$("#fileRequest").click(function() {
    // // hope the server sets Content-Disposition: attachment!
    window.location = 'file.doc';
});

    // Function for Pop Window //
    function openwindow(){
    	
   		window.open ("/NWMBaseUI/tools/devicestatus.html","mywindow","menubar=1,resizable=1,width=750,height7550,align:center");
    	//window.location = 'http://localhost:8080/NWMBaseUI/tools/devicestatus.html';
    	
    }
    
    
    //
    
   function AlertIt() {
    	alert("Commands Execution InProgress..");
}

          
</script>
               
</script>
<script type = "text/javascript">
/* $(document).ready(function(){
	alert("hai");
var table = document.getElementById('jobs');
if (table != null) {
	alert("for loop");
    for (var i = 0; i < table.rows.length; i++) {
        for (var j = 0; j < table.rows[i].cells.length; j++)
        	alert(" inside for loop");
        table.rows[i].cells[j].click = function () {
            tableText(this);
        };
    }
}

function tableText(tableCell) {
	alert("function");
    alert(tableCell.innerHTML);
}
}); */

$("#jobs").click(function(){
	   alert($(this).text());
	});
	
var MyRows = $('table#htmlTable').find('tbody').find('tr');
for (var i = 0; i < MyRows.length; i++) {
var MyIndexValue = $(MyRows[i]).find('td:eq(0)').html();
}

	</script>
	
	
	<script type="text/javascript">
	function confirm_alert(node) {
	    return confirm("Please click on OK to continue.");
}
</script>

</head>
<body >

<div class="container">
    <h3></h3>
    <hr>
   
    <div class="row">
        <div class="panel panel-primary filterable">
            <div class="panel-heading">
                <h3 class="panel-title"></style>Job Status</h3>
                <div class="pull-right">
                    <button class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
                </div>
            </div>
            <table class="data-jobs-js table table-striped" id = "jobs" >
                <thead>
                    <tr class="filters" >
                        <th><input type="text" class="form-control" placeholder="Transaction Id"  disabled></th>
                        <th><input type="text" class="form-control" placeholder="CIRCLE "  disabled></th>
                        <th><input type="text" class="form-control" placeholder="CLIENT "  disabled></th>
                         <th><input type="text" class="form-control" placeholder="Type "  disabled></th>
                        <th><input type="text" class="form-control" placeholder="Devices"  disabled></th>
                        <th><input type="text" class="form-control" placeholder="Commands"   disabled></th>
                        <th><input type="text" class="form-control" placeholder="Status" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Report"  disabled ></th>
                    </tr>
                </thead>
                <tbody>
               <!--  <tr>
                <td>UNIQUEID</td>
                <td>CIRCLE_NAME</td>
                <td>CLIENT_NAME</td>
                <td>Element_Name</td>
                <td>Command_list</td>
                <td>Status</td>
                <td><a href=link>Report</a></td>
            </tr>
            <tr>
               <td>UNIQUEID</td>
                <td>CIRCLE_NAME</td>
                <td>CLIENT_NAME</td>
                <td>Element_Name</td>
                <td>Command_list</td>
                <td>Status</td>
                <td><a href=link>Report</a></td>
            </tr>
            <tr>
                <td>UNIQUEID</td>
                <td>CIRCLE_NAME</td>
                <td>CLIENT_NAME</td>
                <td>Element_Name</td>
                <td>Command_list</td>
                <td>Status</td>
                <td><a href=link>Report</a></td>
            </tr>
              <tr>
               <td>UNIQUEID</td>
                <td>CIRCLE_NAME</td>
                <td>CLIENT_NAME</td>
                <td>Element_Name</td>
                <td>Command_list</td>
                <td>Status</td>
                <td><a href=link>Report</a></td>
            </tr>
              <tr>
              <td>UNIQUEID</td>
                <td>CIRCLE_NAME</td>
                <td>CLIENT_NAME</td>
                <td>Element_Name</td>
                <td>Command_list</td>
                <td>Status</td>
                <td><a href=link>Report</a></td>
            </tr> -->
            
                </tbody>
            </table>

        </div>
    </div>
</div>
</body>
</html>                                		